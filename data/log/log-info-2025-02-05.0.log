25-02-05.11:28:54.444 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:28:54.446 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 25196 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:28:54.446 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:28:55.149 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:28:55.154 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:28:55.176 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
25-02-05.11:28:55.398 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$842ed88e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:28:55.412 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:28:55.559 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:28:55.907 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:28:56.186 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:28:56.227 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:28:56.374 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:28:56.381 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:28:56.381 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:28:56.381 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:28:56.467 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:28:56.467 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1997 ms
25-02-05.11:28:58.419 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:28:59.161 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:28:59.161 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:28:59.173 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:28:59.180 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:28:59.190 [main            ] INFO  Application            - Started Application in 5.021 seconds (JVM running for 5.598)
25-02-05.11:28:59.426 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:28:59.426 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:28:59.426 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:28:59.427 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:28:59.734 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:38:39.128 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:38:39.128 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:38:39.128 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:38:39.187 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:38:39.187 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:38:39.254 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:38:39.296 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:38:39.392 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$51d91d84.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:38:39.401 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$51d91d84.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:39:16.408 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:39:16.410 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:39:16.580 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:39:16.657 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:39:16.657 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:39:16.735 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:39:16.735 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:39:16.737 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.11:39:16.749 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.11:39:43.602 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:39:43.605 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 13588 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:39:43.605 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:39:44.283 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:39:44.284 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:39:44.309 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.11:39:44.535 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$2f927740] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:39:44.547 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:39:44.768 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:39:45.166 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:39:45.450 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:39:45.514 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:39:45.674 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:39:45.682 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:39:45.682 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:39:45.682 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:39:45.766 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:39:45.767 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2130 ms
25-02-05.11:39:47.836 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:39:48.606 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:39:48.606 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:39:48.618 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:39:48.638 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:39:48.649 [main            ] INFO  Application            - Started Application in 5.419 seconds (JVM running for 6.077)
25-02-05.11:39:48.800 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:39:49.132 [RMI TCP Connection(3)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:39:49.132 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:39:49.133 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:39:49.275 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:40:02.524 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:40:02.525 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:40:02.525 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:40:02.577 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:40:02.577 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:40:02.619 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:40:02.662 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:40:15.205 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$a0eeebf.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:40:15.213 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$a0eeebf.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:40:15.408 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:40:15.409 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:40:15.574 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:40:15.661 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:40:15.662 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:40:15.744 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:40:15.744 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:40:15.746 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.11:40:15.756 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.11:41:57.113 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:41:57.116 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 9468 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:41:57.116 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:41:57.788 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:41:57.789 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:41:57.812 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.11:41:58.035 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$8e32fe3d] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:41:58.049 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:41:58.249 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:41:58.606 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:41:58.905 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:41:58.952 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:41:59.093 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:41:59.099 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:41:59.099 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:41:59.099 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:41:59.186 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:41:59.187 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2045 ms
25-02-05.11:42:01.354 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:42:02.127 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:42:02.127 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:42:02.140 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:42:02.149 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:42:02.160 [main            ] INFO  Application            - Started Application in 5.364 seconds (JVM running for 5.934)
25-02-05.11:42:02.432 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:42:02.432 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:42:02.434 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-02-05.11:42:02.690 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:42:03.007 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:42:08.080 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:42:08.080 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:42:08.080 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:42:08.134 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:42:08.135 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:42:08.172 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:42:08.213 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:42:08.270 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$e867937c.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:42:08.276 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$e867937c.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:42:19.915 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:42:19.919 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 15804 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:42:19.919 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:42:20.613 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:42:20.615 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:42:20.641 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
25-02-05.11:42:20.908 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$2ea07e58] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:20.923 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:21.104 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:42:21.507 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:42:21.794 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:42:21.836 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:21.973 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:42:21.979 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:42:21.979 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:42:21.979 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:42:22.058 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:42:22.058 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2109 ms
25-02-05.11:42:24.090 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:42:24.853 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:42:24.854 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:42:24.866 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:42:24.874 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:42:24.884 [main            ] INFO  Application            - Started Application in 5.318 seconds (JVM running for 5.921)
25-02-05.11:42:25.073 [RMI TCP Connection(4)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:42:25.073 [RMI TCP Connection(4)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:42:25.073 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:42:25.074 [RMI TCP Connection(4)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:42:25.398 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:42:30.059 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:42:30.059 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:42:30.059 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:42:30.109 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:42:30.109 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:42:30.148 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:42:30.184 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:42:30.232 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$c5923e92.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:42:30.237 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$c5923e92.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:42:55.469 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:42:55.472 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 7752 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:42:55.473 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:42:56.160 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:42:56.161 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:42:56.185 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
25-02-05.11:42:56.414 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$11d2f335] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:56.427 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:56.614 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:42:56.985 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:42:57.279 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:42:57.321 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:42:57.461 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:42:57.467 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:42:57.467 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:42:57.467 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:42:57.552 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:42:57.552 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2052 ms
25-02-05.11:42:59.634 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:43:00.386 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:43:00.386 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:43:00.399 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:43:00.407 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:43:00.417 [main            ] INFO  Application            - Started Application in 5.269 seconds (JVM running for 5.841)
25-02-05.11:43:00.915 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:43:00.915 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:43:00.916 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:43:00.917 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:43:01.257 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:43:06.940 [http-nio-8092-exec-2] INFO  RootNode               - ROOT节点
25-02-05.11:43:06.940 [http-nio-8092-exec-2] INFO  SwitchNode             - SWITCH节点
25-02-05.11:43:06.940 [http-nio-8092-exec-2] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:43:06.990 [http-nio-8092-exec-2] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:43:06.990 [http-nio-8092-exec-2] INFO  MarketNode             - MARKET节点
25-02-05.11:44:13.531 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m12s167ms996µs600ns).
25-02-05.11:45:25.750 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=1m12s220ms846µs600ns).
25-02-05.11:45:25.751 [http-nio-8092-exec-2] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:45:25.770 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:45:25.790 [http-nio-8092-exec-2] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:45:25.839 [http-nio-8092-exec-2] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$21fc633e.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:45:25.845 [http-nio-8092-exec-2] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$21fc633e.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:45:26.770 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:45:26.771 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:45:26.937 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:45:27.023 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:45:27.023 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:45:27.100 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:45:27.100 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:45:27.102 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.11:45:27.118 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.11:45:38.821 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:45:38.823 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 14840 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:45:38.824 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:45:39.480 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:45:39.481 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:45:39.507 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
25-02-05.11:45:39.744 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$11d2f335] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:45:39.757 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:45:39.948 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:45:40.305 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:45:40.584 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:45:40.633 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:45:40.777 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:45:40.783 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:45:40.783 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:45:40.783 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:45:40.869 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:45:40.869 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2017 ms
25-02-05.11:45:42.989 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:45:43.747 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:45:43.747 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:45:43.758 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:45:43.766 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:45:43.775 [main            ] INFO  Application            - Started Application in 5.282 seconds (JVM running for 5.857)
25-02-05.11:45:44.152 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:45:44.152 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:45:44.153 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:45:44.405 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:45:44.714 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:45:46.837 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:45:46.837 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:45:46.837 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:45:46.885 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:45:46.885 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:46:29.286 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.11:46:29.331 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:46:29.383 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$21fc633e.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.11:46:29.389 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$21fc633e.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:46:29.622 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:46:29.622 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:46:29.793 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:46:29.881 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:46:29.882 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:46:29.969 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:46:29.969 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:46:29.970 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.11:46:29.980 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.11:47:40.300 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:47:40.303 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 22848 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:47:40.303 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:47:40.968 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:47:40.969 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:47:40.992 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.11:47:41.225 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$6fbbc8e3] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:47:41.241 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:47:41.445 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:47:41.808 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:47:42.115 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:47:42.158 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:47:42.299 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:47:42.305 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:47:42.305 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:47:42.305 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:47:42.386 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:47:42.386 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2056 ms
25-02-05.11:47:44.428 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:47:45.238 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:47:45.239 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:47:45.249 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:47:45.256 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:47:45.266 [main            ] INFO  Application            - Started Application in 5.282 seconds (JVM running for 5.837)
25-02-05.11:47:45.732 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:47:45.732 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:47:45.734 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-02-05.11:47:45.972 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:47:46.280 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:47:48.997 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:47:48.997 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:47:48.997 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:47:49.047 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:47:49.047 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:48:03.911 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.11:48:03.953 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:48:58.560 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 22348 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:48:58.560 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:48:58.561 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:48:59.118 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:48:59.119 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:48:59.139 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.11:48:59.320 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$9a47ea0b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:48:59.332 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:48:59.477 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:48:59.813 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:49:00.111 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:49:00.148 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:49:00.268 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:49:00.273 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:49:00.274 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:49:00.274 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:49:00.345 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:49:00.346 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1763 ms
25-02-05.11:49:02.253 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:49:02.995 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:49:02.997 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:49:03.008 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:49:03.015 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:49:03.023 [main            ] INFO  Application            - Started Application in 4.726 seconds (JVM running for 5.231)
25-02-05.11:49:03.506 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:49:03.506 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:49:03.507 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:49:03.747 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:49:04.025 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:49:18.552 [http-nio-8092-exec-2] INFO  RootNode               - ROOT节点
25-02-05.11:49:18.552 [http-nio-8092-exec-2] INFO  SwitchNode             - SWITCH节点
25-02-05.11:49:18.552 [http-nio-8092-exec-2] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:49:18.599 [http-nio-8092-exec-2] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan1, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:49:18.599 [http-nio-8092-exec-2] INFO  MarketNode             - MARKET节点
25-02-05.11:49:18.636 [http-nio-8092-exec-2] INFO  MarketNode             - 折扣价格为:0
25-02-05.11:49:18.678 [http-nio-8092-exec-2] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:49:52.859 [http-nio-8092-exec-10] INFO  RootNode               - ROOT节点
25-02-05.11:49:52.859 [http-nio-8092-exec-10] INFO  SwitchNode             - SWITCH节点
25-02-05.11:49:52.859 [http-nio-8092-exec-10] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:49:53.165 [http-nio-8092-exec-10] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan2, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:49:53.165 [http-nio-8092-exec-10] INFO  MarketNode             - MARKET节点
25-02-05.11:49:53.206 [http-nio-8092-exec-10] INFO  MarketNode             - 折扣价格为:0
25-02-05.11:49:53.248 [http-nio-8092-exec-10] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.11:49:53.252 [http-nio-8092-exec-10] WARN  TradeRepository        - 拼团系统-该团已取消或者满员
25-02-05.11:49:53.255 [http-nio-8092-exec-10] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:165)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$cd0f3fa1.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:49:53.261 [http-nio-8092-exec-10] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:172)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$cd0f3fa1.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.11:50:43.687 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:50:43.688 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:50:43.860 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:50:43.944 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:50:43.945 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:50:44.017 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.11:50:44.017 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.11:50:44.019 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.11:50:44.028 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.11:50:48.938 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.11:50:48.940 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 2632 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.11:50:48.940 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.11:50:49.608 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.11:50:49.609 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.11:50:49.637 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
25-02-05.11:50:49.881 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$8e121947] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:50:49.896 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:50:50.077 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.11:50:50.443 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:50:50.724 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.11:50:50.774 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.11:50:50.946 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.11:50:50.955 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.11:50:50.955 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.11:50:50.956 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.11:50:51.053 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.11:50:51.054 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2087 ms
25-02-05.11:50:53.209 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.11:50:53.977 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.11:50:53.977 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.11:50:53.990 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.11:50:53.998 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.11:50:54.009 [main            ] INFO  Application            - Started Application in 5.392 seconds (JVM running for 5.949)
25-02-05.11:50:54.377 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.11:50:54.378 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.11:50:54.378 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.11:50:54.379 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.11:50:54.725 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.11:50:59.271 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.11:50:59.271 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.11:50:59.271 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.11:50:59.319 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan2, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.11:50:59.319 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.11:50:59.361 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.11:50:59.397 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:09:29.825 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=18m34s992ms866µs201ns).
25-02-05.12:09:29.873 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:09:29.873 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:09:29.873 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:09:29.876 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:09:29.876 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:09:29.877 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:09:29.877 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:10:16.732 [HikariPool-1 housekeeper] WARN  HikariPool             - HikariPool-1 - Thread starvation or clock leap detected (housekeeper delta=46s909ms18µs400ns).
25-02-05.12:10:16.733 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-该团已取消或者满员
25-02-05.12:10:16.745 [redisson-netty-2-10] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xa9adbe8d, L:/192.168.10.123:59165 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.748 [redisson-netty-2-2] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x08b84017, L:/192.168.10.123:59161 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.748 [redisson-netty-2-5] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x0d69da9b, L:/192.168.10.123:59163 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.749 [redisson-netty-2-12] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xaffbf39f, L:/192.168.10.123:59166 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.749 [redisson-netty-2-3] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0x209f99ef, L:/192.168.10.123:59162 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.752 [redisson-netty-2-8] ERROR ErrorsLoggingHandler   - Exception occured. Channel: [id: 0xf0250a7d, L:/192.168.10.123:59164 - R:117.72.40.102/117.72.40.102:6379]
java.io.IOException: 远程主机强迫关闭了一个现有的连接。
	at sun.nio.ch.SocketDispatcher.read0(Native Method)
	at sun.nio.ch.SocketDispatcher.read(SocketDispatcher.java:43)
	at sun.nio.ch.IOUtil.readIntoNativeBuffer(IOUtil.java:223)
	at sun.nio.ch.IOUtil.read(IOUtil.java:192)
	at sun.nio.ch.SocketChannelImpl.read(SocketChannelImpl.java:378)
	at io.netty.buffer.PooledByteBuf.setBytes(PooledByteBuf.java:256)
	at io.netty.buffer.AbstractByteBuf.writeBytes(AbstractByteBuf.java:1132)
	at io.netty.channel.socket.nio.NioSocketChannel.doReadBytes(NioSocketChannel.java:357)
	at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:151)
	at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724)
	at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650)
	at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562)
	at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997)
	at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74)
	at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.785 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:165)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$78fd7a8a.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:16.797 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:172)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$78fd7a8a.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:10:17.785 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:10:17.786 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:10:17.967 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:10:18.361 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:10:18.361 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:10:18.459 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:10:18.460 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:10:18.461 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.12:10:18.472 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.12:10:38.849 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:10:38.850 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 15984 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:10:38.850 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:10:39.503 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:10:39.504 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:10:39.529 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 15 ms. Found 0 Redis repository interfaces.
25-02-05.12:10:39.791 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$2cda6215] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:10:39.807 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:10:39.979 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:10:40.356 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:10:40.622 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:10:40.672 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:10:40.829 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:10:40.829 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:10:40.829 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:10:40.829 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:10:40.907 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:10:40.907 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2026 ms
25-02-05.12:10:43.055 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:10:43.806 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:10:43.806 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:10:43.819 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:10:43.835 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:10:43.835 [main            ] INFO  Application            - Started Application in 5.351 seconds (JVM running for 22.806)
25-02-05.12:10:43.961 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:10:44.245 [RMI TCP Connection(3)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:10:44.245 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:10:44.245 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 0 ms
25-02-05.12:10:44.372 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:10:46.775 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.12:10:46.775 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.12:10:46.775 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:10:46.819 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan2, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:10:46.819 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.12:10:46.854 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:10:46.892 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:11:08.871 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-该团已取消或者满员
25-02-05.12:11:08.887 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:165)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$393c8574.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:11:08.900 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:172)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$393c8574.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:11:20.055 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:11:20.057 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 10260 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:11:20.057 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:11:20.718 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:11:20.719 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:11:20.746 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 18 ms. Found 0 Redis repository interfaces.
25-02-05.12:11:20.977 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$6fd85331] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:11:20.990 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:11:21.157 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:11:21.533 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:11:21.804 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:11:21.856 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:11:22.024 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:11:22.031 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:11:22.032 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:11:22.032 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:11:22.119 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:11:22.119 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2035 ms
25-02-05.12:11:24.271 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:11:25.046 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:11:25.046 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:11:25.058 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:11:25.066 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:11:25.076 [main            ] INFO  Application            - Started Application in 5.351 seconds (JVM running for 5.913)
25-02-05.12:11:25.392 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:11:25.690 [RMI TCP Connection(3)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:11:25.690 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:11:25.691 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.12:11:25.813 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:11:28.056 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.12:11:28.056 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.12:11:28.056 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:11:28.103 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan2, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:11:28.103 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.12:11:28.141 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:11:28.179 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:11:47.600 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-该团已取消或者满员
25-02-05.12:11:47.611 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:165)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$b3287be3.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:11:47.642 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:172)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$b3287be3.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:12:02.878 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:12:02.885 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 28536 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:12:02.891 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:12:05.708 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:12:05.708 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 5412 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:12:05.709 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:12:06.269 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:12:06.270 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:12:06.299 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.12:12:06.493 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$19fdd4ac] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:12:06.508 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:12:06.654 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:12:06.994 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:12:07.283 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:12:07.330 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:12:07.482 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:12:07.489 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:12:07.489 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:12:07.489 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:12:07.582 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:12:07.583 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1849 ms
25-02-05.12:12:09.608 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:12:10.346 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:12:10.346 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:12:10.357 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:12:10.364 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:12:10.373 [main            ] INFO  Application            - Started Application in 4.91 seconds (JVM running for 5.597)
25-02-05.12:12:10.776 [RMI TCP Connection(2)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:12:10.777 [RMI TCP Connection(2)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:12:10.779 [RMI TCP Connection(2)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-02-05.12:12:10.779 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:12:11.102 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:12:27.318 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.12:12:27.318 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.12:12:27.318 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:12:27.362 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan2, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:12:27.362 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.12:12:27.400 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:12:27.442 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:13:28.378 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:13:28.380 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 16748 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:13:28.380 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:13:28.944 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:13:28.945 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:13:28.967 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.12:13:29.147 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$842ed88e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:13:29.159 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:13:29.311 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:13:29.648 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:13:29.955 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:13:29.992 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:13:30.117 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:13:30.122 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:13:30.122 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:13:30.122 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:13:30.207 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:13:30.208 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1805 ms
25-02-05.12:13:32.075 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:13:32.825 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:13:32.825 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:13:32.838 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:13:32.845 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:13:32.853 [main            ] INFO  Application            - Started Application in 4.731 seconds (JVM running for 5.192)
25-02-05.12:13:33.573 [RMI TCP Connection(3)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:13:33.574 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:13:33.574 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:13:33.575 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.12:13:33.886 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:14:05.503 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:14:05.504 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:14:05.679 [SpringApplicationShutdownHook] INFO  DefaultRocketMQListenerContainer - container destroyed, DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:14:05.753 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:14:05.753 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:14:05.829 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:9876] result: true
25-02-05.12:14:05.829 [NettyClientSelector_1] INFO  RocketmqRemoting       - closeChannel: close the connection to remote address[117.72.40.102:10911] result: true
25-02-05.12:14:05.831 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown initiated...
25-02-05.12:14:05.846 [SpringApplicationShutdownHook] INFO  HikariDataSource       - HikariPool-1 - Shutdown completed.
25-02-05.12:14:25.515 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:14:25.517 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 5776 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:14:25.517 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:14:26.096 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:14:26.098 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:14:26.119 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.12:14:26.312 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$842ed88e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:14:26.326 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:14:26.467 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:14:26.813 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:14:27.109 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:14:27.149 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:14:27.270 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:14:27.275 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:14:27.275 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:14:27.275 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:14:27.362 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:14:27.363 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1821 ms
25-02-05.12:14:29.316 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:14:30.074 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:14:30.074 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:14:30.086 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:14:30.093 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:14:30.103 [main            ] INFO  Application            - Started Application in 4.861 seconds (JVM running for 5.396)
25-02-05.12:14:30.358 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:14:30.358 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:14:30.360 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-02-05.12:14:30.643 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:14:30.937 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:14:33.520 [http-nio-8092-exec-2] INFO  RootNode               - ROOT节点
25-02-05.12:14:33.520 [http-nio-8092-exec-2] INFO  SwitchNode             - SWITCH节点
25-02-05.12:14:33.520 [http-nio-8092-exec-2] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:14:33.565 [http-nio-8092-exec-2] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan3, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:14:33.565 [http-nio-8092-exec-2] INFO  MarketNode             - MARKET节点
25-02-05.12:14:33.607 [http-nio-8092-exec-2] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:14:33.651 [http-nio-8092-exec-2] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:14:47.940 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.12:14:47.940 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.12:14:47.940 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:14:47.981 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan4, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:14:47.981 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.12:14:48.022 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:14:48.063 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:14:48.065 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-该团已取消或者满员
25-02-05.12:14:48.067 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:165)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$51d91d84.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:14:48.071 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderSlave$1(TradeRepository.java:172)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderSlave(TradeRepository.java:159)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$51d91d84.lockGroupBuyOrderSlave(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:33)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:132)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:15:40.788 [http-nio-8092-exec-7] INFO  RootNode               - ROOT节点
25-02-05.12:15:40.789 [http-nio-8092-exec-7] INFO  SwitchNode             - SWITCH节点
25-02-05.12:15:40.789 [http-nio-8092-exec-7] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.12:15:40.828 [http-nio-8092-exec-7] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.12:15:40.828 [http-nio-8092-exec-7] INFO  MarketNode             - MARKET节点
25-02-05.12:15:40.865 [http-nio-8092-exec-7] INFO  MarketNode             - 折扣价格为:0
25-02-05.12:15:40.907 [http-nio-8092-exec-7] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.12:16:37.070 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:16:37.073 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 15436 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:16:37.073 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:16:37.750 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:16:37.751 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:16:37.777 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
25-02-05.12:16:38.008 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$11551395] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:16:38.021 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:16:38.215 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:16:38.574 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:16:39.179 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:16:39.223 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:16:39.371 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:16:39.377 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:16:39.377 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:16:39.377 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:16:39.471 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:16:39.471 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2372 ms
25-02-05.12:16:41.580 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:16:42.329 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:16:42.329 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:16:42.339 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:16:42.346 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:16:42.356 [main            ] INFO  Application            - Started Application in 5.597 seconds (JVM running for 6.159)
25-02-05.12:16:43.094 [RMI TCP Connection(2)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:16:43.094 [RMI TCP Connection(2)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:16:43.094 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:16:43.095 [RMI TCP Connection(2)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.12:16:43.420 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:17:13.305 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.domain.trade.service.rule.node.UserTakingFilter.doApply(UserTakingFilter.java:33)
	at cn.ant0n.gbm.domain.trade.service.rule.node.UserTakingFilter.doApply(UserTakingFilter.java:18)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:39)
	at cn.ant0n.gbm.domain.trade.service.rule.node.GroupAvailableFilter.doApply(GroupAvailableFilter.java:38)
	at cn.ant0n.gbm.domain.trade.service.rule.node.GroupAvailableFilter.doApply(GroupAvailableFilter.java:20)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:39)
	at cn.ant0n.gbm.domain.trade.service.rule.node.ActivityAvailableFilter.doApply(ActivityAvailableFilter.java:46)
	at cn.ant0n.gbm.domain.trade.service.rule.node.ActivityAvailableFilter.doApply(ActivityAvailableFilter.java:21)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.domain.trade.service.rule.factory.TradeLogicFilterChainFactory.filter(TradeLogicFilterChainFactory.java:27)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.12:17:23.386 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.12:17:23.387 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 24444 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.12:17:23.387 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.12:17:23.993 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.12:17:23.994 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.12:17:24.016 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.12:17:24.208 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$842ed88e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:17:24.223 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:17:24.358 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.12:17:24.712 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:17:24.993 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.12:17:25.033 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.12:17:25.158 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.12:17:25.163 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.12:17:25.163 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.12:17:25.163 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.12:17:25.246 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.12:17:25.247 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1837 ms
25-02-05.12:17:27.193 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.12:17:27.936 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.12:17:27.936 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.12:17:27.948 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.12:17:27.955 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.12:17:27.964 [main            ] INFO  Application            - Started Application in 4.881 seconds (JVM running for 5.345)
25-02-05.12:17:28.418 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.12:17:28.688 [RMI TCP Connection(5)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.12:17:28.688 [RMI TCP Connection(5)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.12:17:28.692 [RMI TCP Connection(5)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 3 ms
25-02-05.12:17:28.818 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.12:17:30.842 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.domain.trade.service.rule.node.UserTakingFilter.doApply(UserTakingFilter.java:33)
	at cn.ant0n.gbm.domain.trade.service.rule.node.UserTakingFilter.doApply(UserTakingFilter.java:18)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:39)
	at cn.ant0n.gbm.domain.trade.service.rule.node.GroupAvailableFilter.doApply(GroupAvailableFilter.java:38)
	at cn.ant0n.gbm.domain.trade.service.rule.node.GroupAvailableFilter.doApply(GroupAvailableFilter.java:20)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.router(AbstractMultiThreadStrategyRouter.java:39)
	at cn.ant0n.gbm.domain.trade.service.rule.node.ActivityAvailableFilter.doApply(ActivityAvailableFilter.java:46)
	at cn.ant0n.gbm.domain.trade.service.rule.node.ActivityAvailableFilter.doApply(ActivityAvailableFilter.java:21)
	at cn.ant0n.gbm.types.design.framework.tree.AbstractMultiThreadStrategyRouter.apply(AbstractMultiThreadStrategyRouter.java:29)
	at cn.ant0n.gbm.domain.trade.service.rule.factory.TradeLogicFilterChainFactory.filter(TradeLogicFilterChainFactory.java:27)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:75)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.15:43:41.546 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.15:43:41.548 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 516 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.15:43:41.548 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.15:43:42.279 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.15:43:42.281 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.15:43:42.308 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.15:43:42.535 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$9a47ea0b] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:43:42.546 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:43:42.714 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.15:43:43.168 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:43:43.444 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:43:43.505 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:43:43.680 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.15:43:43.687 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.15:43:43.687 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.15:43:43.687 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.15:43:43.784 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.15:43:43.784 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2207 ms
25-02-05.15:43:45.889 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.15:43:46.685 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.15:43:46.685 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.15:43:46.698 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.15:43:46.706 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.15:43:46.717 [main            ] INFO  Application            - Started Application in 5.5 seconds (JVM running for 6.019)
25-02-05.15:43:46.976 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.15:43:46.976 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.15:43:46.976 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.15:43:46.977 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.15:43:47.299 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.15:43:51.644 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.15:43:51.644 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.15:43:51.644 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.15:43:51.689 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.15:43:51.689 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.15:43:51.689 [http-nio-8092-exec-1] INFO  MJCalculateService     - 折扣策略计算-策略:MJ
25-02-05.15:43:51.689 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.15:43:51.729 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.15:43:51.776 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$cd0f3fa1.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.15:43:51.780 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$cd0f3fa1.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.15:45:04.613 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.15:45:04.615 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 20248 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.15:45:04.615 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.15:45:05.356 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.15:45:05.357 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.15:45:05.384 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 16 ms. Found 0 Redis repository interfaces.
25-02-05.15:45:05.627 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$2b7a323e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:45:05.641 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:45:05.818 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.15:45:06.194 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:45:06.474 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:45:06.521 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:45:06.680 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.15:45:06.691 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.15:45:06.691 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.15:45:06.691 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.15:45:06.784 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.15:45:06.784 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 2140 ms
25-02-05.15:45:08.906 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.15:45:09.659 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.15:45:09.659 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.15:45:09.671 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.15:45:09.678 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.15:45:09.687 [main            ] INFO  Application            - Started Application in 5.412 seconds (JVM running for 6.038)
25-02-05.15:45:09.962 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.15:45:09.962 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.15:45:09.962 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.15:45:09.963 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.15:45:10.272 [RMI TCP Connection(2)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.15:45:14.091 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.15:45:14.092 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.15:45:14.092 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.15:45:14.137 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.15:45:14.137 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.15:45:43.397 [http-nio-8092-exec-1] INFO  MJCalculateService     - 折扣策略计算-策略:MJ
25-02-05.15:46:45.309 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:null
25-02-05.15:46:45.351 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.15:46:45.403 [http-nio-8092-exec-1] WARN  TradeRepository        - 拼团系统-锁定拼团单失败
org.springframework.dao.DataIntegrityViolationException: 
### Error updating database.  Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
### The error may exist in file [E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes\mybatis\mapper\group_buy_order_mapper.xml]
### The error may involve cn.ant0n.gbm.infrastructure.dao.IGroupBuyOrderDao.insert-Inline
### The error occurred while setting parameters
### SQL: insert into group_buy_order         (team_id, activity_id, source, channel,original_price, deduction_price,          pay_price, target_count, complete_count, lock_count, status, start_time, end_time)         values (?, ?, ?, ?, ?, ?, ?,                 ?, ?, ?, ?, ?, ?)
### Cause: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
; Column 'deduction_price' cannot be null; nested exception is java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at org.springframework.jdbc.support.SQLExceptionSubclassTranslator.doTranslate(SQLExceptionSubclassTranslator.java:87)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:70)
	at org.springframework.jdbc.support.AbstractFallbackSQLExceptionTranslator.translate(AbstractFallbackSQLExceptionTranslator.java:79)
	at org.mybatis.spring.MyBatisExceptionTranslator.translateExceptionIfPossible(MyBatisExceptionTranslator.java:91)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:441)
	at com.sun.proxy.$Proxy97.insert(Unknown Source)
	at org.mybatis.spring.SqlSessionTemplate.insert(SqlSessionTemplate.java:272)
	at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:62)
	at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:152)
	at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:85)
	at com.sun.proxy.$Proxy103.insert(Unknown Source)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:125)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$92d26ad2.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
Caused by: java.sql.SQLIntegrityConstraintViolationException: Column 'deduction_price' cannot be null
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:117)
	at com.mysql.cj.jdbc.exceptions.SQLError.createSQLException(SQLError.java:97)
	at com.mysql.cj.jdbc.exceptions.SQLExceptionsMapping.translateException(SQLExceptionsMapping.java:122)
	at com.mysql.cj.jdbc.ClientPreparedStatement.executeInternal(ClientPreparedStatement.java:953)
	at com.mysql.cj.jdbc.ClientPreparedStatement.execute(ClientPreparedStatement.java:370)
	at com.zaxxer.hikari.pool.ProxyPreparedStatement.execute(ProxyPreparedStatement.java:44)
	at com.zaxxer.hikari.pool.HikariProxyPreparedStatement.execute(HikariProxyPreparedStatement.java)
	at org.apache.ibatis.executor.statement.PreparedStatementHandler.update(PreparedStatementHandler.java:47)
	at org.apache.ibatis.executor.statement.RoutingStatementHandler.update(RoutingStatementHandler.java:74)
	at org.apache.ibatis.executor.SimpleExecutor.doUpdate(SimpleExecutor.java:50)
	at org.apache.ibatis.executor.BaseExecutor.update(BaseExecutor.java:117)
	at org.apache.ibatis.executor.CachingExecutor.update(CachingExecutor.java:76)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.update(DefaultSqlSession.java:197)
	at org.apache.ibatis.session.defaults.DefaultSqlSession.insert(DefaultSqlSession.java:184)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.mybatis.spring.SqlSessionTemplate$SqlSessionInterceptor.invoke(SqlSessionTemplate.java:427)
	... 75 common frames omitted
25-02-05.15:46:45.408 [http-nio-8092-exec-1] INFO  TradeController        - 错误
cn.ant0n.gbm.types.exception.AppException: null
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lambda$lockGroupBuyOrderMaster$0(TradeRepository.java:131)
	at org.springframework.transaction.support.TransactionTemplate.execute(TransactionTemplate.java:140)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository.lockGroupBuyOrderMaster(TradeRepository.java:123)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$FastClassBySpringCGLIB$$4c230d6c.invoke(<generated>)
	at org.springframework.cglib.proxy.MethodProxy.invoke(MethodProxy.java:218)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.invokeJoinpoint(CglibAopProxy.java:793)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)
	at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)
	at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)
	at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)
	at cn.ant0n.gbm.infrastructure.adapter.repository.TradeRepository$$EnhancerBySpringCGLIB$$92d26ad2.lockGroupBuyOrderMaster(<generated>)
	at cn.ant0n.gbm.domain.trade.service.TradeService.lockGroupBuyOrder(TradeService.java:30)
	at cn.ant0n.gbm.trigger.http.TradeController.groupBuyTrade(TradeController.java:130)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
	at java.lang.reflect.Method.invoke(Method.java:498)
	at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:205)
	at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:150)
	at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)
	at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)
	at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
	at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)
	at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)
	at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)
	at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:909)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:555)
	at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)
	at javax.servlet.http.HttpServlet.service(HttpServlet.java:623)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:209)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.boot.actuate.metrics.web.servlet.WebMvcMetricsFilter.doFilterInternal(WebMvcMetricsFilter.java:96)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
	at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)
	at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:178)
	at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:153)
	at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167)
	at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90)
	at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:481)
	at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:130)
	at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93)
	at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74)
	at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:343)
	at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:390)
	at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63)
	at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:926)
	at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1791)
	at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
	at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
	at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
	at java.lang.Thread.run(Thread.java:750)
25-02-05.15:48:46.783 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.15:48:46.784 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 22092 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.15:48:46.785 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.15:48:47.362 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.15:48:47.363 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.15:48:47.384 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 13 ms. Found 0 Redis repository interfaces.
25-02-05.15:48:47.566 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$842ed88e] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:48:47.579 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:48:47.729 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.15:48:48.067 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:48:48.357 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:48:48.397 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:48:48.522 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.15:48:48.527 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.15:48:48.528 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.15:48:48.528 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.15:48:48.611 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.15:48:48.611 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1805 ms
25-02-05.15:48:50.534 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.15:48:51.294 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.15:48:51.294 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.15:48:51.304 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.15:48:51.310 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.15:48:51.318 [main            ] INFO  Application            - Started Application in 4.794 seconds (JVM running for 5.268)
25-02-05.15:48:51.790 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.15:48:52.063 [RMI TCP Connection(3)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.15:48:52.063 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.15:48:52.064 [RMI TCP Connection(3)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 1 ms
25-02-05.15:48:52.152 [RMI TCP Connection(1)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.15:48:55.871 [http-nio-8092-exec-1] INFO  RootNode               - ROOT节点
25-02-05.15:48:55.871 [http-nio-8092-exec-1] INFO  SwitchNode             - SWITCH节点
25-02-05.15:48:55.871 [http-nio-8092-exec-1] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.15:48:55.919 [http-nio-8092-exec-1] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.15:48:55.919 [http-nio-8092-exec-1] INFO  MarketNode             - MARKET节点
25-02-05.15:48:55.919 [http-nio-8092-exec-1] INFO  MJCalculateService     - 折扣策略计算-策略:MJ
25-02-05.15:48:55.920 [http-nio-8092-exec-1] INFO  MarketNode             - 折扣价格为:11.99
25-02-05.15:48:55.959 [http-nio-8092-exec-1] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
25-02-05.15:50:39.894 [background-preinit] INFO  Version                - HV000001: Hibernate Validator 6.2.5.Final
25-02-05.15:50:39.894 [main            ] INFO  Application            - Starting Application using Java 1.8.0_371 on LAPTOP-T7SUU4QG with PID 16344 (E:\java_project\GroupBuyMarket\GroupBuyMarket-app\target\classes started by 杨晓灿 in E:\java_project\GroupBuyMarket)
25-02-05.15:50:39.894 [main            ] INFO  Application            - The following 1 profile is active: "dev"
25-02-05.15:50:40.498 [main            ] INFO  RepositoryConfigurationDelegate - Multiple Spring Data modules found, entering strict repository configuration mode
25-02-05.15:50:40.499 [main            ] INFO  RepositoryConfigurationDelegate - Bootstrapping Spring Data Redis repositories in DEFAULT mode.
25-02-05.15:50:40.522 [main            ] INFO  RepositoryConfigurationDelegate - Finished Spring Data repository scanning in 14 ms. Found 0 Redis repository interfaces.
25-02-05.15:50:40.723 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redisClientConfig' of type [cn.ant0n.gbm.config.RedisClientConfig$$EnhancerBySpringCGLIB$$b5cb4b6a] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:50:40.736 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redis.sdk.config-cn.ant0n.gbm.config.RedisClientConfigProperties' of type [cn.ant0n.gbm.config.RedisClientConfigProperties] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:50:40.871 [main            ] INFO  Version                - Redisson 3.23.4
25-02-05.15:50:41.213 [redisson-netty-2-6] INFO  MasterPubSubConnectionPool - 1 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:50:41.500 [redisson-netty-2-13] INFO  MasterConnectionPool   - 5 connections initialized for 117.72.40.102/117.72.40.102:6379
25-02-05.15:50:41.542 [main            ] INFO  PostProcessorRegistrationDelegate$BeanPostProcessorChecker - Bean 'redissonClient' of type [org.redisson.Redisson] is not eligible for getting processed by all BeanPostProcessors (for example: not eligible for auto-proxying)
25-02-05.15:50:41.672 [main            ] INFO  TomcatWebServer        - Tomcat initialized with port(s): 8092 (http)
25-02-05.15:50:41.678 [main            ] INFO  Http11NioProtocol      - Initializing ProtocolHandler ["http-nio-8092"]
25-02-05.15:50:41.678 [main            ] INFO  StandardService        - Starting service [Tomcat]
25-02-05.15:50:41.678 [main            ] INFO  StandardEngine         - Starting Servlet engine: [Apache Tomcat/9.0.75]
25-02-05.15:50:41.762 [main            ] INFO  [/]                    - Initializing Spring embedded WebApplicationContext
25-02-05.15:50:41.762 [main            ] INFO  ServletWebServerApplicationContext - Root WebApplicationContext: initialization completed in 1831 ms
25-02-05.15:50:43.733 [main            ] INFO  EndpointLinksResolver  - Exposing 1 endpoint(s) beneath base path '/actuator'
25-02-05.15:50:44.499 [main            ] INFO  DefaultRocketMQListenerContainer - running container: DefaultRocketMQListenerContainer{consumerGroup='group-buy-consumer-group', nameServer='117.72.40.102:9876', topic='GroupBuyMarketSuccessTopic', consumeMode=CONCURRENTLY, selectorType=TAG, selectorExpression='*', messageModel=CLUSTERING}
25-02-05.15:50:44.499 [main            ] INFO  ListenerContainerConfiguration - Register the listener to container, listenerBeanName:groupBuyMarketSuccessListener, containerBeanName:org.apache.rocketmq.spring.support.DefaultRocketMQListenerContainer_1
25-02-05.15:50:44.512 [main            ] INFO  Http11NioProtocol      - Starting ProtocolHandler ["http-nio-8092"]
25-02-05.15:50:44.520 [main            ] INFO  TomcatWebServer        - Tomcat started on port(s): 8092 (http) with context path ''
25-02-05.15:50:44.531 [main            ] INFO  Application            - Started Application in 4.916 seconds (JVM running for 5.389)
25-02-05.15:50:44.821 [RMI TCP Connection(1)-192.168.10.123] INFO  [/]                    - Initializing Spring DispatcherServlet 'dispatcherServlet'
25-02-05.15:50:44.821 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Initializing Servlet 'dispatcherServlet'
25-02-05.15:50:44.823 [RMI TCP Connection(1)-192.168.10.123] INFO  DispatcherServlet      - Completed initialization in 2 ms
25-02-05.15:50:45.046 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Starting...
25-02-05.15:50:45.340 [RMI TCP Connection(3)-192.168.10.123] INFO  HikariDataSource       - HikariPool-1 - Start completed.
25-02-05.15:51:04.862 [http-nio-8092-exec-2] INFO  RootNode               - ROOT节点
25-02-05.15:51:04.862 [http-nio-8092-exec-2] INFO  SwitchNode             - SWITCH节点
25-02-05.15:51:04.862 [http-nio-8092-exec-2] INFO  SwitchNode             - 拼团系统-活动正常,未降级
25-02-05.15:51:04.910 [http-nio-8092-exec-2] INFO  MarketNode             - 拼团商品查询试算服务-MarketNode:userId:yangxiaocan, 异步多线程加载数据【ProductSkuVO, GroupBuyActivityDiscountV】完成
25-02-05.15:51:04.910 [http-nio-8092-exec-2] INFO  MarketNode             - MARKET节点
25-02-05.15:51:04.911 [http-nio-8092-exec-2] INFO  MJCalculateService     - 折扣策略计算-策略:MJ
25-02-05.15:51:04.911 [http-nio-8092-exec-2] INFO  MarketNode             - 折扣价格为:11.99
25-02-05.15:51:04.955 [http-nio-8092-exec-2] INFO  EndNode                - 拼团商品查询试算服务-动态上下文查询测试, ProductSkuVO:ProductSkuVO(productId=1001, productName=测试商品, price=12.00), GroupBuyActivityDiscountV:GroupBuyActivityDiscountVO(activityId=100301, activityName=测试拼团活动, source=s01, channel=c01, productId=1001, groupBuyDiscount=GroupBuyActivityDiscountVO.GroupBuyDiscount(discountName=满减优惠100-10元, discountDesc=满减优惠100-10元, discountType=TAG, discountPlan=MJ, discountExpr=10,12, tagId=666666), groupType=AUTO, takeLimitCount=2, target=3, validTime=20, status=ENABLE, startTime=Tue Jan 02 06:05:24 GMT+08:00 2024, endTime=Fri Mar 28 06:05:34 GMT+08:00 2025, tagId=1, tagScope=1)
